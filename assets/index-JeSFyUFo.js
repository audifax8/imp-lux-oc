import{R as b,j as e,d as w,r as o,e as i,f as A,s as I,h as S}from"./index-K1aCR8j8.js";import{B as P}from"./index-C6zZ_Bht.js";import{A as D}from"./Arrow-CQcpDwWK.js";import"./vendor-CwAj_GBv.js";const x=b.forwardRef((s,a)=>s.showSkeleton?e.jsx("div",{className:w("yr-skeleton yr-image",s.className)}):e.jsx("img",{ref:a,...s,className:w("yr-image",s.className),loading:s.priority||"lazy"}));x.displayName="Image";const R=o.memo(function(s){const{av:a,selectedAvId:m,onClickCallback:c}=s,r=`fc-swatch-wrapper--img ${a.id===m?"fc-swatch-wrapper--img--selected":"fc-swatch-wrapper--img--border"}`,n=o.useCallback((d,l)=>(l.preventDefault(),l.stopPropagation(),c?c(d,l):l),[c]);return e.jsx("button",{type:"button",className:"fc-swatch",onClick:d=>n(a,d),children:e.jsxs("div",{className:"fc-swatch-wrapper",children:[e.jsx("div",{className:r,children:e.jsx(x,{src:a.testUrl,alt:a.name})}),e.jsx("div",{className:"fc-swatch-wrapper--name",children:e.jsx("span",{children:a?.name})})]})})}),O=s=>{const{remainingItems:a,label:m,onClickCallback:c}=s,r=o.useCallback(n=>(n.preventDefault(),n.stopPropagation(),c?c(n):n),[c]);return e.jsx("button",{type:"button",className:"fc-view-more",onClick:r,children:e.jsxs("div",{className:"fc-view-more--wrapper",children:[e.jsx("div",{className:"fc-view-more--wrapper--amount",children:`+ ${a}`}),e.jsx("div",{className:"fc-view-more--wrapper--name",children:e.jsx("span",{children:m})})]})})};function z(s){const{alias:a,icon:m,avs:c,currentPage:r,avsLenght:n,caName:d}=s.menu,[l,g]=o.useState(s.menu.selectedAvId),[f,v]=o.useState(s.menu.selectedAvName),[h,N]=o.useState(!1),k=()=>{const t=i.luxAPI.reloadPagination(s.menu);return A(t)},y=async(t,u)=>{try{await i.setRecipe([{ca:{alias:a},av:{id:t.id}}]);const p=i.luxAPI.getToken(),C=i.getImg();I(p,C),g(t.id),v(t.name),i.assetsWorker.preloadAssets(a),u.preventDefault(),u.stopPropagation()}catch(p){console.log(p)}},j=t=>{i.assetsWorker.preloadAssets(a),t.preventDefault(),N(!h)};return e.jsxs("details",{open:h,className:"yr-accordion",onClick:j,children:[e.jsxs("summary",{className:"yr-accordion-summary",children:[e.jsx(x,{src:m,alt:a,className:"yr-accordion-summary-image"}),e.jsxs("div",{className:"yr-accordion-header",children:[e.jsx("h3",{className:"yr-accordion-header-title",children:d}),e.jsx("p",{className:"yr-accordion-header-selected",children:f})]}),e.jsx(P,{icon:e.jsx(D,{size:16,direction:h?"up":"down",className:"yr-accordion-arrow"}),onClick:j})]}),e.jsx("div",{className:"yr-accordion-content",children:h&&e.jsxs("ul",{className:"fc-attribute-values","aria-label":"attribute values menu",children:[c&&c?.length&&c.map((t,u)=>e.jsx("li",{children:e.jsx(R,{av:t,caAlias:a,selectedAvId:l,index:u,onClickCallback:y})},t.id||u)),r<n&&e.jsx("li",{children:e.jsx(O,{remainingItems:n-r,label:"view more",onClickCallback:k})},c?.length)]})})]})}function V(){const[s]=S();return e.jsx(e.Fragment,{children:s.map(a=>e.jsx(z,{menu:a},a.id))})}export{V as default};
