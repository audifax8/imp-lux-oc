import{r as m,j as e,I as C,B as N,A as b,g as p,s as y,R as I,b as A,k as S,h as z}from"./index-BOQSvt5o.js";import"./vendor-CwAj_GBv.js";const O=m.memo(function(r){const{av:a,selectedAvId:i,onClickCallback:s}=r,n=`fc-swatch-wrapper--img ${a.id===i?"fc-swatch-wrapper--img--selected":"fc-swatch-wrapper--img--border"}`,t=m.useCallback((d,l)=>(l.preventDefault(),l.stopPropagation(),s?s(d,l):l),[s]);return e.jsx("button",{type:"button",className:"fc-swatch",onClick:d=>t(a,d),children:e.jsxs("div",{className:"fc-swatch-wrapper",children:[e.jsx("div",{className:n,children:e.jsx("img",{src:a.testUrl,alt:a.name})}),e.jsx("div",{className:"fc-swatch-wrapper--name",children:e.jsx("span",{children:a?.name})})]})})}),P=r=>{const{remainingItems:a,label:i,onClickCallback:s}=r,n=m.useCallback(t=>(t.preventDefault(),t.stopPropagation(),s?s(t):t),[s]);return e.jsx("button",{type:"button",className:"fc-view-more",onClick:n,children:e.jsxs("div",{className:"fc-view-more--wrapper",children:[e.jsx("div",{className:"fc-view-more--wrapper--amount",children:`+ ${a}`}),e.jsx("div",{className:"fc-view-more--wrapper--name",children:e.jsx("span",{children:i})})]})})};function R(r){const{alias:a,icon:i,avs:s,currentPage:n,avsLenght:t,caName:d}=r.menu,[l,x]=m.useState(r.menu.selectedAvId),[j,w]=m.useState(r.menu.selectedAvName),[u,g]=m.useState(!1),v=c=>{console.log(c)},f=async c=>{try{await p.setRecipe([{ca:{alias:a},av:{id:c.id}}]);const o=p.luxAPI.getToken(),k=p.getImg();y(o,k),x(c.id),w(c.name)}catch(o){console.log(o)}},h=c=>{c.preventDefault(),g(!u)};return e.jsxs("details",{open:u,className:"yr-accordion",onClick:h,children:[e.jsxs("summary",{className:"yr-accordion-summary",children:[e.jsx(C,{src:i,alt:a,className:"yr-accordion-summary-image"}),e.jsxs("div",{className:"yr-accordion-header",children:[e.jsx("h3",{className:"yr-accordion-header-title",children:d}),e.jsx("p",{className:"yr-accordion-header-selected",children:j})]}),e.jsx(N,{icon:e.jsx(b,{size:16,direction:u?"up":"down"}),tabIndex:-1,onClick:h})]}),e.jsx("div",{className:"yr-accordion-content",children:u&&e.jsxs("ul",{className:"fc-attribute-values","aria-label":"attribute values menu",children:[s&&s?.length&&s.map((c,o)=>e.jsx("li",{children:e.jsx(O,{av:c,caAlias:a,selectedAvId:l,index:o,onClickCallback:f})},c.id||o)),n<t&&e.jsx("li",{children:e.jsx(P,{remainingItems:t-n,label:"view more",onClickCallback:v})},s?.length)]})})]})}const E=I.memo(function({corePromise:a}){a.read();const[i]=A(),[s]=S();return s.length&&e.jsx("section",{className:z("yr-customizer",{"yr-customizer-open":i}),children:s.map(n=>e.jsx(R,{menu:n},n.id))})});export{E as default};
