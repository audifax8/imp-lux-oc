import{R as S,j as e,k as j,r as m,h as t,l as T,m as v,n as D}from"./index-CG0fTwzt.js";import{B}from"./index-D-bn7Vw3.js";import{A as O}from"./Arrow-rVebhrpz.js";import"./vendor-CwAj_GBv.js";const w=S.forwardRef((s,a)=>s.showSkeleton?e.jsx("div",{className:j("yr-skeleton yr-image",s.className)}):e.jsx("img",{ref:a,...s,className:j("yr-image",s.className),loading:s.priority||"lazy"}));w.displayName="Image";const z=m.memo(function(s){const{av:a,selectedAvId:d,onClickCallback:c}=s,l=`fc-swatch-wrapper--img ${a.id===d?"fc-swatch-wrapper--img--selected":"fc-swatch-wrapper--img--border"}`,r=m.useCallback((u,i)=>(i.preventDefault(),i.stopPropagation(),c?c(u,i):i),[c]);return e.jsx("button",{type:"button",className:"fc-swatch",onClick:u=>r(a,u),children:e.jsxs("div",{className:"fc-swatch-wrapper",children:[e.jsx("div",{className:l,children:e.jsx(w,{src:a.testUrl,alt:a.name})}),e.jsx("div",{className:"fc-swatch-wrapper--name",children:e.jsx("span",{children:a?.name})})]})})}),E=s=>{const{remainingItems:a,label:d,onClickCallback:c}=s,l=m.useCallback(r=>(r.preventDefault(),r.stopPropagation(),c?c(r):r),[c]);return e.jsx("button",{type:"button",className:"fc-view-more",onClick:l,children:e.jsxs("div",{className:"fc-view-more--wrapper",children:[e.jsx("div",{className:"fc-view-more--wrapper--amount",children:`+ ${a}`}),e.jsx("div",{className:"fc-view-more--wrapper--name",children:e.jsx("span",{children:d})})]})})};function M(s){const{alias:a,icon:d,avs:c,currentPage:l,avsLenght:r,caName:u}=s.menu,[i,f]=m.useState(s.menu.selectedAvId),[A,C]=m.useState(s.menu.selectedAvName),[h,k]=m.useState(!1),I=()=>{const n=t.luxAPI.reloadPagination(s.menu);return T(n)},y=async(n,o)=>{try{const p=t.luxAPI.getAttributeByAlias(a);await t.setRecipe([{ca:{alias:a},av:{id:n.id}}]),f(n.id),C(n.name);const x=t.luxAPI.getToken(),g=p.viewName,b=t.luxAPI.getProductImg(g),P=t.luxAPI.mapConfigureImgs(g),R=t.rtrAPI.mapCameraNameRTRToComponent(a);v({token:x,configureImg:b,imgs:P,viewName:g}),t.rtrAPI?.selectComponent(R),t.rtrAPI?.handleTokenChange(x),t?.assetsWorker?.preloadAssets(a),o.preventDefault(),o.stopPropagation()}catch(p){console.log(p)}},N=n=>{const o=t.luxAPI.getAttributeByAlias(a),p=t.rtrAPI.mapCameraNameRTRToComponent(a),x=o.viewName;v({viewName:x}),t.rtrAPI?.selectComponent(p),t?.assetsWorker?.preloadAssets(a),n.preventDefault(),k(!h)};return e.jsxs("details",{open:h,className:"yr-accordion",onClick:N,children:[e.jsxs("summary",{className:"yr-accordion-summary",children:[e.jsx(w,{src:d,alt:a,className:"yr-accordion-summary-image"}),e.jsxs("div",{className:"yr-accordion-header",children:[e.jsx("h3",{className:"yr-accordion-header-title",children:u}),e.jsx("p",{className:"yr-accordion-header-selected",children:A})]}),e.jsx(B,{icon:e.jsx(O,{size:16,direction:h?"up":"down",className:"yr-accordion-arrow"}),onClick:N})]}),e.jsx("div",{className:"yr-accordion-content",children:h&&e.jsxs("ul",{className:"fc-attribute-values","aria-label":"attribute values menu",children:[c&&c?.length&&c.map((n,o)=>e.jsx("li",{children:e.jsx(z,{av:n,caAlias:a,selectedAvId:i,index:o,onClickCallback:y})},n.id||o)),l<r&&e.jsx("li",{children:e.jsx(E,{remainingItems:r-l,label:"view more",onClickCallback:I})},c?.length)]})})]})}function F(){const[s]=D();return e.jsx(e.Fragment,{children:s?.map(a=>e.jsx(M,{menu:a},a.id))})}export{F as default};
