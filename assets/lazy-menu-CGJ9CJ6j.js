import{R as I,j as e,k as j,r as p,h as c,l as k,m as y,n as P}from"./index-B3zT2cjJ.js";import{B as b}from"./index-BxqaQy4P.js";import{A as S}from"./Arrow-IOz7fICv.js";import"./vendor-CwAj_GBv.js";const f=I.forwardRef((s,a)=>s.showSkeleton?e.jsx("div",{className:j("yr-skeleton yr-image",s.className)}):e.jsx("img",{ref:a,...s,className:j("yr-image",s.className),loading:s.priority||"lazy"}));f.displayName="Image";function R(s){const{alias:a,icon:r,caName:t,selectedAvName:l}=s.menu,{isOpen:i,onOpenCallback:o}=s,m=u=>{o&&o(u),u.preventDefault(),u.stopPropagation()};return e.jsx(e.Fragment,{children:e.jsxs("summary",{className:"yr-accordion-summary",children:[e.jsx(f,{src:r,alt:a,className:"yr-accordion-summary-image"}),e.jsxs("div",{className:"yr-accordion-header",children:[e.jsx("h3",{className:"yr-accordion-header-title",children:t}),e.jsx("p",{className:"yr-accordion-header-selected",children:l})]}),e.jsx(b,{icon:e.jsx(S,{size:16,direction:i?"up":"down",className:"yr-accordion-arrow"}),onClick:m})]})})}const B=p.memo(function(s){const{av:a,selectedAvId:r,onClickCallback:t}=s,l=`fc-swatch-wrapper--img ${a.id===r?"fc-swatch-wrapper--img--selected":"fc-swatch-wrapper--img--border"}`,i=p.useCallback((o,m)=>(m.preventDefault(),m.stopPropagation(),t?t(o,m):m),[t]);return e.jsx("button",{type:"button",className:"fc-swatch",onClick:o=>i(a,o),children:e.jsxs("div",{className:"fc-swatch-wrapper",children:[e.jsx("div",{className:l,children:e.jsx(f,{src:a.colorCodeURL||a.url,alt:a.name})}),e.jsx("div",{className:"fc-swatch-wrapper--name",children:e.jsx("span",{children:a?.name})})]})})}),D=s=>{const{remainingItems:a,label:r,onClickCallback:t}=s,l=p.useCallback(i=>(i.preventDefault(),i.stopPropagation(),t?t(i):i),[t]);return e.jsx("button",{type:"button",className:"fc-view-more",onClick:l,children:e.jsxs("div",{className:"fc-view-more--wrapper",children:[e.jsx("div",{className:"fc-view-more--wrapper--amount",children:`+ ${a}`}),e.jsx("div",{className:"fc-view-more--wrapper--name",children:e.jsx("span",{children:r})})]})})};function O(s){const{alias:a,avs:r,currentPage:t,avsLenght:l}=s.menu,{isOpen:i,selectedAvId:o,onViewMoreClickCB:m,onSwatchClickCB:u}=s,g=n=>{m&&m(n),n.preventDefault(),n.stopPropagation()},C=async(n,d)=>{u&&u(n,d),d.preventDefault(),d.stopPropagation()};return e.jsx(e.Fragment,{children:i&&e.jsx("div",{className:"yr-accordion-content",children:e.jsxs("ul",{className:"fc-attribute-values","aria-label":"attribute values menu",children:[r&&r?.length&&r.map((n,d)=>e.jsx("li",{children:e.jsx(B,{av:n,caAlias:a,selectedAvId:o,index:d,onClickCallback:C})},n.id||d)),t<l&&e.jsx("li",{children:e.jsx(D,{remainingItems:l-t,label:"view more",onClickCallback:g})},r?.length)]})})})}function M(s){const{alias:a}=s.menu,[r,t]=p.useState(s.menu.selectedAvId),[l,i]=p.useState(s.menu.selectedAvName),[o,m]=p.useState(!1),u=n=>{m(!o);const d=c.luxAPI.getAttributeByAlias(a),h=c.rtrAPI.mapCameraNameRTRToComponent(a),x=d.viewName;k({viewName:x}),c.rtrAPI?.selectComponent(h),c?.assetsWorker?.preloadAssets(a),n.preventDefault(),n.stopPropagation()},g=()=>{const n=c.luxAPI.reloadPagination(s.menu);return y(n)},C=async(n,d)=>{try{const h=c.luxAPI.getAttributeByAlias(a);await c.setRecipe([{ca:{alias:a},av:{id:n.id}}]),t(n.id),i(n.name);const x=c.luxAPI.getToken(),w=h.viewName,N=c.luxAPI.getProductImg(w),v=c.luxAPI.mapConfigureImgs(w),A=c.rtrAPI.mapCameraNameRTRToComponent(a);k({token:x,configureImg:N,imgs:v,viewName:w}),c.rtrAPI?.selectComponent(A),c.rtrAPI?.handleTokenChange(x),c?.assetsWorker?.preloadAssets(a),d.preventDefault(),d.stopPropagation()}catch(h){console.log(h)}};return e.jsx("details",{open:o,className:"yr-accordion",onClick:u,children:e.jsxs(e.Fragment,{children:[e.jsx(R,{menu:s.menu,selectedAvId:r,selectedAvName:l,isOpen:o,onOpenCallback:u}),e.jsx(O,{menu:s.menu,isOpen:o,selectedAvId:r,selectedAvName:l,onViewMoreClickCB:g,onSwatchClickCB:C})]})})}function L(){const[s]=P();return e.jsx(e.Fragment,{children:s?.map(a=>e.jsx(M,{menu:a},a.id))})}export{L as default};
