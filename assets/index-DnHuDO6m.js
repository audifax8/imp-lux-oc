import{r as m,j as e,I as C,B as N,A as b,h as p,i as y,s as I,R as A,a as S,k as P,c as z}from"./index-DWnRtf_l.js";import"./vendor-CwAj_GBv.js";const O=m.memo(function(n){const{av:a,selectedAvId:i,onClickCallback:s}=n,t=`fc-swatch-wrapper--img ${a.id===i?"fc-swatch-wrapper--img--selected":"fc-swatch-wrapper--img--border"}`,r=m.useCallback((d,l)=>(l.preventDefault(),l.stopPropagation(),s?s(d,l):l),[s]);return e.jsx("button",{type:"button",className:"fc-swatch",onClick:d=>r(a,d),children:e.jsxs("div",{className:"fc-swatch-wrapper",children:[e.jsx("div",{className:t,children:e.jsx("img",{src:a.testUrl,alt:a.name})}),e.jsx("div",{className:"fc-swatch-wrapper--name",children:e.jsx("span",{children:a?.name})})]})})}),D=n=>{const{remainingItems:a,label:i,onClickCallback:s}=n,t=m.useCallback(r=>(r.preventDefault(),r.stopPropagation(),s?s(r):r),[s]);return e.jsx("button",{type:"button",className:"fc-view-more",onClick:t,children:e.jsxs("div",{className:"fc-view-more--wrapper",children:[e.jsx("div",{className:"fc-view-more--wrapper--amount",children:`+ ${a}`}),e.jsx("div",{className:"fc-view-more--wrapper--name",children:e.jsx("span",{children:i})})]})})};function R(n){const{alias:a,icon:i,avs:s,currentPage:t,avsLenght:r,caName:d}=n.menu,[l,x]=m.useState(n.menu.selectedAvId),[j,w]=m.useState(n.menu.selectedAvName),[u,g]=m.useState(!1),v=()=>{const c=p.luxAPI.reloadPagination(n.menu);return y(c)},f=async c=>{try{await p.setRecipe([{ca:{alias:a},av:{id:c.id}}]);const o=p.luxAPI.getToken(),k=p.getImg();I(o,k),x(c.id),w(c.name)}catch(o){console.log(o)}},h=c=>{c.preventDefault(),g(!u)};return e.jsxs("details",{open:u,className:"yr-accordion",onClick:h,children:[e.jsxs("summary",{className:"yr-accordion-summary",children:[e.jsx(C,{src:i,alt:a,className:"yr-accordion-summary-image"}),e.jsxs("div",{className:"yr-accordion-header",children:[e.jsx("h3",{className:"yr-accordion-header-title",children:d}),e.jsx("p",{className:"yr-accordion-header-selected",children:j})]}),e.jsx(N,{icon:e.jsx(b,{size:16,direction:u?"up":"down"}),tabIndex:-1,onClick:h})]}),e.jsx("div",{className:"yr-accordion-content",children:u&&e.jsxs("ul",{className:"fc-attribute-values","aria-label":"attribute values menu",children:[s&&s?.length&&s.map((c,o)=>e.jsx("li",{children:e.jsx(O,{av:c,caAlias:a,selectedAvId:l,index:o,onClickCallback:f})},c.id||o)),t<r&&e.jsx("li",{children:e.jsx(D,{remainingItems:r-t,label:"view more",onClickCallback:v})},s?.length)]})})]})}const M=A.memo(function({corePromise:a}){a.read();const[i]=S(),[s]=P();return s.length&&e.jsx("section",{className:z("yr-customizer",{"yr-customizer-open":i}),children:s.map(t=>e.jsx(R,{menu:t},t.id))})});export{M as default};
