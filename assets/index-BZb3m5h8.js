import{r as m,j as e,I as k,B as C,A as N,g as p,s as b,R as y,b as I,k as A,h as S}from"./index-BJpZfAlZ.js";import"./vendor-CwAj_GBv.js";const z=m.memo(function(r){const{av:a,selectedAvId:i,onClickCallback:s}=r,n=`fc-swatch-wrapper--img ${a.id===i?"fc-swatch-wrapper--img--selected":"fc-swatch-wrapper--img--border"}`,t=m.useCallback((d,l)=>(l.preventDefault(),l.stopPropagation(),s?s(d,l):l),[s]);return e.jsx("button",{type:"button",className:"fc-swatch",onClick:d=>t(a,d),children:e.jsxs("div",{className:"fc-swatch-wrapper",children:[e.jsx("div",{className:n,children:e.jsx("img",{src:a.testUrl,alt:a.name})}),e.jsx("div",{className:"fc-swatch-wrapper--name",children:e.jsx("span",{children:a?.name})})]})})}),O=r=>{const{remainingItems:a,label:i,onClickCallback:s}=r,n=m.useCallback(t=>(t.preventDefault(),t.stopPropagation(),s?s(t):t),[s]);return e.jsx("button",{type:"button",className:"fc-view-more",onClick:n,children:e.jsxs("div",{className:"fc-view-more--wrapper",children:[e.jsx("div",{className:"fc-view-more--wrapper--amount",children:`+ ${a}`}),e.jsx("div",{className:"fc-view-more--wrapper--name",children:e.jsx("span",{children:i})})]})})};function P(r){const{alias:a,icon:i,avs:s,currentPage:n,avsLenght:t}=r.menu,[d,l]=m.useState(r.menu.selectedAvId),[x,j]=m.useState(r.menu.selectedAvName),[u,w]=m.useState(!1),g=c=>{console.log(c)},v=async c=>{try{await p.setRecipe([{ca:{alias:a},av:{id:c.id}}]);const o=p.luxAPI.getToken(),f=p.getImg();b(o,f),l(c.id),j(c.name)}catch(o){console.log(o)}},h=c=>{c.preventDefault(),w(!u)};return e.jsxs("details",{open:u,className:"yr-accordion",onClick:h,children:[e.jsxs("summary",{className:"yr-accordion-summary",children:[e.jsx(k,{src:i,alt:a,className:"yr-accordion-summary-image"}),e.jsxs("div",{className:"yr-accordion-header",children:[e.jsx("h3",{className:"yr-accordion-header-title",children:a}),e.jsx("p",{className:"yr-accordion-header-selected",children:x})]}),e.jsx(C,{icon:e.jsx(N,{size:16,direction:u?"up":"down"}),tabIndex:-1,onClick:h})]}),e.jsx("div",{className:"yr-accordion-content",children:u&&e.jsxs("ul",{className:"fc-attribute-values","aria-label":"attribute values menu",children:[s&&s?.length&&s.map((c,o)=>e.jsx("li",{children:e.jsx(z,{av:c,caAlias:a,selectedAvId:d,index:o,onClickCallback:v})},c.id||o)),n<t&&e.jsx("li",{children:e.jsx(O,{remainingItems:t-n,label:"view more",onClickCallback:g})},s?.length)]})})]})}const B=y.memo(function({corePromise:a}){a.read();const[i]=I(),[s]=A();return s.length&&e.jsx("section",{className:S("yr-customizer",{"yr-customizer-open":i}),children:s.map(n=>e.jsx(P,{menu:n},n.id))})});export{B as default};
