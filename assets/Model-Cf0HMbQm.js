import{g as k,r as w}from"./vendor-CwAj_GBv.js";import{r as u,u as S,a as D,b as O,c as n,S as R,j as c,d as p,g as $,C as h,F as L,e as N,s as C,f as T,h as F,i as U}from"./index-BClYIwsq.js";function v(e,o){for(var t=0;t<o.length;t++){const r=o[t];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}var _=w();const y=k(_),M=v({__proto__:null,default:y},[_]),G=new Promise(e=>{const o=n?.getParams();if(!o)return;const{workflow:t,customer:r,product:s,locale:a,yrEnv:P}=o,x=`${h}/static/configs/3.13.0/prod/${t}/${r}/product/${s}/graph-settings-${a}.json`,j=`${h}/static/configs/3.13.0/prod/${t}/${r}/preferences.json`;Promise.all([fetch(j),fetch(x)]).then(async([f,d])=>{const I=await(y||M);if(!f.ok||!d.ok)return o.yrEnv&&console.log("Error loading graph or settings JSONs"),e(!1);const E=await d.json(),A=await f.json();I({productGraph:E,preferences:A,shouldSkipCache:!1,product:s,customer:r,workflow:t},(g,m)=>{if(g)return o.yrEnv&&(console.log("Error"),console.log(g)),e(!1);n.initLuxApi(m);const i=n.luxAPI.getProductImg("LUX-Ray-Ban-8taOhSR5AFyjt9tfxU"),b={as:"image",crossOrigin:"anonymous",fetchPriority:L.HIGH};N.preload(i,b),fetch(i).then(()=>{const l=n.luxAPI.getToken();return C(!0),T(l,i),F(!1),U(m),e(i)}).catch(l=>{P&&console.log({e:l}),e(!1)})})}).catch(()=>e(!1))});function J(){const e=u.use(G),o=e||R,[t]=S(),[r]=D(),[s]=O(),a=$();return u.useEffect(()=>{r.rtrDisabled||t&&s&&n.rtrAPI?.init(s)},[r.rtrDisabled,t,s]),o&&c.jsxs("section",{className:"yr-model",children:[c.jsx("div",{id:"viewer",className:p("yr-model__rtr",{"yr-model__hidden":!t})}),c.jsx("picture",{className:p("yr-model__placeholder","yr-image",{"yr-model__hidden":t}),children:c.jsx("img",{src:o,alt:"Model",height:a.dimentions.height,width:a.dimentions.width})})]})}export{J as default};
