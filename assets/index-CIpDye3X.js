import{j as e,d as w,R as g,r as d,I as b,B as A,e as l,f as P,s as S,h as L}from"./index-9_XGRmBA.js";import"./vendor-CwAj_GBv.js";function D({size:s=16,direction:a="down",className:t}){const c={down:0,up:180,left:-90,right:90}[a];return e.jsx("svg",{width:s,height:s+1,viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{transform:`rotate(${c}deg)`},className:w("yr-icon-arrow",t),children:e.jsx("path",{d:"M7.99998 13.4742L0.195312 5.66923L1.13798 4.72656L7.99998 11.5882L14.862 4.72656L15.8046 5.66923L7.99998 13.4742Z"})})}const j=g.forwardRef((s,a)=>s.showSkeleton?e.jsx("div",{className:w("yr-skeleton yr-image",s.className)}):e.jsx("img",{ref:a,...s,className:w("yr-image",s.className),loading:s.priority||"lazy"}));j.displayName="Image";const R=d.memo(function(s){const{av:a,selectedAvId:t,onClickCallback:c}=s,i=`fc-swatch-wrapper--img ${a.id===t?"fc-swatch-wrapper--img--selected":"fc-swatch-wrapper--img--border"}`,r=d.useCallback((m,o)=>(o.preventDefault(),o.stopPropagation(),c?c(m,o):o),[c]);return e.jsx("button",{type:"button",className:"fc-swatch",onClick:m=>r(a,m),children:e.jsxs("div",{className:"fc-swatch-wrapper",children:[e.jsx("div",{className:i,children:e.jsx(j,{src:a.testUrl,alt:a.name})}),e.jsx("div",{className:"fc-swatch-wrapper--name",children:e.jsx("span",{children:a?.name})})]})})}),$=s=>{const{remainingItems:a,label:t,onClickCallback:c}=s,i=d.useCallback(r=>(r.preventDefault(),r.stopPropagation(),c?c(r):r),[c]);return e.jsx("button",{type:"button",className:"fc-view-more",onClick:i,children:e.jsxs("div",{className:"fc-view-more--wrapper",children:[e.jsx("div",{className:"fc-view-more--wrapper--amount",children:`+ ${a}`}),e.jsx("div",{className:"fc-view-more--wrapper--name",children:e.jsx("span",{children:t})})]})})};function B(s){const{alias:a,icon:t,avs:c,currentPage:i,avsLenght:r,caName:m}=s.menu,[o,f]=d.useState(s.menu.selectedAvId),[v,N]=d.useState(s.menu.selectedAvName),[h,k]=d.useState(!1),y=()=>{const n=l.luxAPI.reloadPagination(s.menu);return P(n)},C=async(n,u)=>{try{await l.setRecipe([{ca:{alias:a},av:{id:n.id}}]);const x=l.luxAPI.getToken();l.rtrAPI.handleTokenChange(x);const I=l.getImg();S(x,I),f(n.id),N(n.name),l.assetsWorker.preloadAssets(a),u.preventDefault(),u.stopPropagation()}catch(x){console.log(x)}},p=n=>{l.assetsWorker.preloadAssets(a),n.preventDefault(),k(!h)};return e.jsxs("details",{open:h,className:"yr-accordion",onClick:p,children:[e.jsxs("summary",{className:"yr-accordion-summary",children:[e.jsx(b,{src:t,alt:a,className:"yr-accordion-summary-image"}),e.jsxs("div",{className:"yr-accordion-header",children:[e.jsx("h3",{className:"yr-accordion-header-title",children:m}),e.jsx("p",{className:"yr-accordion-header-selected",children:v})]}),e.jsx(A,{icon:e.jsx(D,{size:16,direction:h?"up":"down",className:"yr-accordion-arrow"}),onClick:p})]}),e.jsx("div",{className:"yr-accordion-content",children:h&&e.jsxs("ul",{className:"fc-attribute-values","aria-label":"attribute values menu",children:[c&&c?.length&&c.map((n,u)=>e.jsx("li",{children:e.jsx(R,{av:n,caAlias:a,selectedAvId:o,index:u,onClickCallback:C})},n.id||u)),i<r&&e.jsx("li",{children:e.jsx($,{remainingItems:r-i,label:"view more",onClickCallback:y})},c?.length)]})})]})}const T=g.memo(function({corePromise:a}){a.read();const[t]=L();return e.jsx(e.Fragment,{children:t.map(c=>e.jsx(B,{menu:c},c.id))})});export{T as default};
