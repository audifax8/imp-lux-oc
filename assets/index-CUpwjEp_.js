import{R as A,j as e,e as g,r as o,d as r,h as b,s as I,i as P}from"./index-BvCXnpl3.js";import{B as S}from"./index-DZjz54gR.js";import{A as D}from"./Arrow-CVGyqKdm.js";import"./vendor-CwAj_GBv.js";const x=A.forwardRef((s,a)=>s.showSkeleton?e.jsx("div",{className:g("yr-skeleton yr-image",s.className)}):e.jsx("img",{ref:a,...s,className:g("yr-image",s.className),loading:s.priority||"lazy"}));x.displayName="Image";const R=o.memo(function(s){const{av:a,selectedAvId:m,onClickCallback:c}=s,l=`fc-swatch-wrapper--img ${a.id===m?"fc-swatch-wrapper--img--selected":"fc-swatch-wrapper--img--border"}`,t=o.useCallback((d,i)=>(i.preventDefault(),i.stopPropagation(),c?c(d,i):i),[c]);return e.jsx("button",{type:"button",className:"fc-swatch",onClick:d=>t(a,d),children:e.jsxs("div",{className:"fc-swatch-wrapper",children:[e.jsx("div",{className:l,children:e.jsx(x,{src:a.testUrl,alt:a.name})}),e.jsx("div",{className:"fc-swatch-wrapper--name",children:e.jsx("span",{children:a?.name})})]})})}),O=s=>{const{remainingItems:a,label:m,onClickCallback:c}=s,l=o.useCallback(t=>(t.preventDefault(),t.stopPropagation(),c?c(t):t),[c]);return e.jsx("button",{type:"button",className:"fc-view-more",onClick:l,children:e.jsxs("div",{className:"fc-view-more--wrapper",children:[e.jsx("div",{className:"fc-view-more--wrapper--amount",children:`+ ${a}`}),e.jsx("div",{className:"fc-view-more--wrapper--name",children:e.jsx("span",{children:m})})]})})};function T(s){const{alias:a,icon:m,avs:c,currentPage:l,avsLenght:t,caName:d}=s.menu,[i,w]=o.useState(s.menu.selectedAvId),[f,k]=o.useState(s.menu.selectedAvName),[h,v]=o.useState(!1),N=()=>{const n=r.luxAPI.reloadPagination(s.menu);return b(n)},y=async(n,u)=>{try{await r.setRecipe([{ca:{alias:a},av:{id:n.id}}]);const p=r.luxAPI.getToken();r.rtrAPI?.handleTokenChange(p);const C=r.getImg();I(p,C),w(n.id),k(n.name),r.assetsWorker.preloadAssets(a),u.preventDefault(),u.stopPropagation()}catch(p){console.log(p)}},j=n=>{r.assetsWorker.preloadAssets(a),n.preventDefault(),v(!h)};return e.jsxs("details",{open:h,className:"yr-accordion",onClick:j,children:[e.jsxs("summary",{className:"yr-accordion-summary",children:[e.jsx(x,{src:m,alt:a,className:"yr-accordion-summary-image"}),e.jsxs("div",{className:"yr-accordion-header",children:[e.jsx("h3",{className:"yr-accordion-header-title",children:d}),e.jsx("p",{className:"yr-accordion-header-selected",children:f})]}),e.jsx(S,{icon:e.jsx(D,{size:16,direction:h?"up":"down",className:"yr-accordion-arrow"}),onClick:j})]}),e.jsx("div",{className:"yr-accordion-content",children:h&&e.jsxs("ul",{className:"fc-attribute-values","aria-label":"attribute values menu",children:[c&&c?.length&&c.map((n,u)=>e.jsx("li",{children:e.jsx(R,{av:n,caAlias:a,selectedAvId:i,index:u,onClickCallback:y})},n.id||u)),l<t&&e.jsx("li",{children:e.jsx(O,{remainingItems:t-l,label:"view more",onClickCallback:N})},c?.length)]})})]})}function V(){const[s]=P();return e.jsx(e.Fragment,{children:s.map(a=>e.jsx(T,{menu:a},a.id))})}export{V as default};
